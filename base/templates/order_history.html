{% extends 'main.html' %}
{% block content %}
<div class="container">
  <h2>My Order History</h2>

  <form method="get" class="card">
    <div class="form-group">{{ filter_form.status.label_tag }}{{ filter_form.status }}</div>
    <div class="form-group">{{ filter_form.size.label_tag }}{{ filter_form.size }}</div>
    <div class="form-group">{{ filter_form.date_from.label_tag }}{{ filter_form.date_from }}</div>
    <div class="form-group">{{ filter_form.date_to.label_tag }}{{ filter_form.date_to }}</div>
    <button class="btn" type="submit">Filter</button>
  </form>

  <table>
    <thead><tr><th>ID</th><th>Bottle</th><th>Qty</th><th>Date</th><th>Status</th><th>Invoice</th></tr></thead>
    <tbody>
      {% for order in orders %}
        <tr>
          <td>{{ order.id }}</td>
          <td>{{ order.bottle }}</td>
          <td>{{ order.quantity }}</td>
          <td>{{ order.order_date|date:"M d, Y - h:i A" }}</td>
          <td>
            {% if order.status == 'PENDING' %}<span class="badge badge-pending">Pending</span>
            {% elif order.status == 'PROCESSING' %}<span class="badge badge-processing">Processing</span>
            {% elif order.status == 'OUT_FOR_DELIVERY' %}<span class="badge badge-processing">Out for Delivery</span>
            {% elif order.status == 'DELIVERED' %}<span class="badge badge-delivered">Delivered</span>
            {% else %}<span class="badge badge-cancelled">Cancelled</span>{% endif %}
          </td>
          <td>
            <a class="btn" href="{% url 'order_invoice' order.id %}">PDF</a>
            <a href="{% url 'order_invoice' order.id %}">View Invoice</a>

          </td>

        </tr>
      {% empty %}
        <tr><td colspan="6">No orders found.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
